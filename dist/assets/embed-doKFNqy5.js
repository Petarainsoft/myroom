import{b as p,R as m,j as d,M as y,h as M,i as u}from"./MyRoomScene-Dtb4-clX.js";const f=new URLSearchParams(window.location.search),g=document.getElementById("embedParams"),i=[];f.forEach((e,o)=>{i.push(`${o}: ${e}`)});i.length>0?g.innerHTML=i.join("<br>"):g.innerHTML="Default settings";setTimeout(()=>{const e=document.getElementById("embedInfo");e&&(e.style.opacity="0",e.style.transition="opacity 0.5s",setTimeout(()=>e.style.display="none",500))},5173);window.addEventListener("message",e=>{var o;e.data.type==="MYROOM_3D_READY"&&(console.log("3D Scene is ready!",e.data),(o=document.querySelector(".loading"))==null||o.remove(),window.parent!==window&&window.parent.postMessage({type:"MYROOM_EMBED_READY",data:e.data},"*"))});const R=()=>{const e=new URLSearchParams(window.location.search);return{room:e.get("room")||"relax-mr_khroom_0001",gender:e.get("gender")||"female",width:e.get("width")||"100%",height:e.get("height")||"100vh",autoplay:e.get("autoplay")==="true"}},E=()=>{const e=R(),o=p(e.gender),r=m.useRef(null),s=a=>{window.parent!==window&&window.parent.postMessage({type:"MYROOM_3D_READY",data:{sceneId:"my-room-scene",timestamp:Date.now()}},"*"),console.log("Embed scene ready:",a)};return m.useEffect(()=>{const a=t=>{if(t.data.type==="MYROOM_3D_COMMAND")switch(console.log("Received command from parent:",t.data),t.data.command){case"RESET_CAMERA":r.current&&r.current.resetCamera&&r.current.resetCamera();break;case"CHANGE_AVATAR":break;default:console.log("Unknown command:",t.data.command)}};return window.addEventListener("message",a),()=>window.removeEventListener("message",a)},[]),d.jsx("div",{className:"babylon-scene-container",style:{width:e.width,height:e.height,margin:0,padding:0,overflow:"hidden",background:"#000"},children:d.jsx(y,{ref:r,roomPath:e.room,avatarConfig:o,onSceneReady:s})})};M.createRoot(document.getElementById("root")).render(d.jsx(m.StrictMode,{children:d.jsx(E,{})}));window.MyRoomEmbed={version:"1.0.0",ready:!1,sendCommand:(e,o)=>{window.postMessage({type:"MYROOM_3D_COMMAND",command:e,data:o},"*")},createEmbed:(e,o={})=>{const{room:r="relax-mr_khroom_0001",gender:s="female",width:a="800px",height:t="600px",autoplay:c=!0}=o;new URLSearchParams({room:r,gender:s,width:a,height:t,autoplay:c.toString()});const n=document.createElement("iframe");return n.src=u({room:r,gender:s,width:a,height:t,autoplay:c.toString()}),n.width=a,n.height=t,n.frameBorder="0",n.style.border="none",e.appendChild(n),{iframe:n,sendCommand:(w,h)=>{var l;(l=n.contentWindow)==null||l.postMessage({type:"MYROOM_3D_COMMAND",command:w,data:h},"*")}}}};console.log("MyRoom 3D Embed loaded successfully!");console.log("Available API:",window.MyRoomEmbed);
